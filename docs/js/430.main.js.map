{"version":3,"file":"js/430.main.js","mappings":"+EAAAA,SAASC,iBAAiB,oBAAoB,WAE5C,MAAMC,EAASF,SAASG,iBAAiB,eACnCC,EAAQJ,SAASK,eAAe,eAChCC,EAAcN,SAASO,cAAc,UACrCC,EAAcR,SAASK,eAAe,eAS5C,SAASI,EAAYC,GACdA,IACsB,KAAvBA,EAAMC,MAAMC,OACdF,EAAMG,UAAUC,IAAI,aAEpBJ,EAAMG,UAAUE,OAAO,aAE3B,CAEF,SAASN,EAAYC,GACQ,KAAvBA,EAAMC,MAAMC,OACdF,EAAMG,UAAUC,IAAI,aAEpBJ,EAAMG,UAAUE,OAAO,YAE3B,CAoFE,SAASC,IACFZ,IACLA,EAAMS,UAAUE,OAAO,QACvBE,YAAW,KACTb,EAAMc,MAAMC,QAAU,MAAM,GAC3B,KACL,CA/GIf,IACFA,EAAMc,MAAMC,QAAU,OACtBf,EAAMS,UAAUE,OAAO,SAqB3Bb,EAAOkB,SAAQV,IACbD,EAAYC,GAEZA,EAAMT,iBAAiB,SAAS,IAAMQ,EAAYC,KAClDA,EAAMT,iBAAiB,QAAQ,IAAMQ,EAAYC,IAAO,IAI1DW,OAAOpB,iBAAiB,QAAQ,KAC9BC,EAAOkB,SAAQV,GAASD,EAAYC,IAAO,IAIvCF,GAEFA,EAAYP,iBAAiB,UAAUqB,eAAgBC,GAErDA,EAAEC,iBAEF,MAAMC,EAAOF,EAAEG,OACTC,EAAeF,EAAKlB,cAAc,eAExC,GAAKoB,EAAL,CAEAA,EAAaC,UAAW,EAExB,IAEE,MAAMC,EAAW,IAAIC,SAASL,GAGxBM,EAAa,IAAIC,gBACjBC,EAAYhB,YAAW,IAAMc,EAAWG,SAAS,KAEjDC,QAAiBC,MAAMX,EAAKY,OAAQ,CACxCC,OAAQ,OACRC,KAAMV,EACNW,OAAQT,EAAWS,SAKrB,GAFAC,aAAaR,IAERE,EAASO,GACZ,MAAM,IAAIC,MAAM,YAAcR,EAASS,QAGzC,MAAMC,QAAeV,EAASW,OAG9B,IAAID,IAAUA,EAAOE,cAAcC,SAAS,WAc1C,MAAM,IAAIL,MAAM,2BAA6BE,GAZzCzC,IACFA,EAAMc,MAAMC,QAAU,QACtBF,YAAW,IAAMb,EAAMS,UAAUC,IAAI,SAAS,KAGhDW,EAAKwB,QAEL/C,EAAOkB,SAAQV,IACbA,EAAMG,UAAUE,OAAO,YAAY,GAOzC,CAAE,MAAOmC,GAEPC,QAAQD,MAAM,SAAUA,GAExBE,MAAM,gCAER,CAAE,QAEAzB,EAAaC,UAAW,CAE1B,CAtDyB,CAwD3B,IAYEtB,GAAeF,GACjBE,EAAYL,iBAAiB,QAASe,GAGpCZ,GACFiB,OAAOpB,iBAAiB,SAAS,SAAUoD,GACrCA,EAAM3B,SAAWtB,GACnBY,GAEJ,GAGJ,G","sources":["webpack://website/./js/form.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function () {\r\n\r\n  const inputs = document.querySelectorAll(\".input-text\");\r\n  const modal = document.getElementById('thanksModal');\r\n  const closeButton = document.querySelector('.close');\r\n  const contactForm = document.getElementById('contactForm');\r\n\r\n  // モーダル初期化\r\n  if (modal) {\r\n    modal.style.display = \"none\";\r\n    modal.classList.remove(\"show\");\r\n  }\r\n\r\n  // フローティングラベル制御\r\n  function toggleLabel(input) {\r\n    if (!input) return;\r\n    if (input.value.trim() !== \"\") {\r\n      input.classList.add(\"not-empty\");\r\n    } else {\r\n      input.classList.remove(\"not-empty\");\r\n    }\r\n  }\r\n\r\nfunction toggleLabel(input) {\r\n  if (input.value.trim() !== \"\") {\r\n    input.classList.add(\"not-empty\");\r\n  } else {\r\n    input.classList.remove(\"not-empty\");\r\n  }\r\n}\r\n\r\ninputs.forEach(input => {\r\n  toggleLabel(input);\r\n\r\n  input.addEventListener(\"input\", () => toggleLabel(input));\r\n  input.addEventListener(\"blur\", () => toggleLabel(input));\r\n});\r\n\r\n// オートフィル対策\r\nwindow.addEventListener(\"load\", () => {\r\n  inputs.forEach(input => toggleLabel(input));\r\n});\r\n\r\n  // フォーム送信処理\r\n  if (contactForm) {\r\n\r\n    contactForm.addEventListener(\"submit\", async function (e) {\r\n\r\n      e.preventDefault();\r\n\r\n      const form = e.target;\r\n      const submitButton = form.querySelector('.submit-btn');\r\n\r\n      if (!submitButton) return;\r\n\r\n      submitButton.disabled = true;\r\n\r\n      try {\r\n\r\n        const formData = new FormData(form);\r\n\r\n        // タイムアウト制御（10秒）\r\n        const controller = new AbortController();\r\n        const timeoutId = setTimeout(() => controller.abort(), 10000);\r\n\r\n        const response = await fetch(form.action, {\r\n          method: 'POST',\r\n          body: formData,\r\n          signal: controller.signal\r\n        });\r\n\r\n        clearTimeout(timeoutId);\r\n\r\n        if (!response.ok) {\r\n          throw new Error(\"HTTPエラー: \" + response.status);\r\n        }\r\n\r\n        const result = await response.text();\r\n\r\n        // GASの戻り値が多少変わっても成功扱いにする\r\n        if (result && result.toLowerCase().includes(\"success\")) {\r\n\r\n          if (modal) {\r\n            modal.style.display = \"block\";\r\n            setTimeout(() => modal.classList.add(\"show\"), 10);\r\n          }\r\n\r\n          form.reset();\r\n\r\n          inputs.forEach(input => {\r\n            input.classList.remove(\"not-empty\");\r\n          });\r\n\r\n        } else {\r\n          throw new Error(\"送信は完了しましたが、想定外のレスポンスです: \" + result);\r\n        }\r\n\r\n      } catch (error) {\r\n\r\n        console.error(\"送信エラー:\", error);\r\n\r\n        alert(\"送信に問題が発生しました。時間をおいて再度お試しください。\");\r\n\r\n      } finally {\r\n\r\n        submitButton.disabled = false;\r\n\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n  // モーダル閉じる処理\r\n  function closeModal() {\r\n    if (!modal) return;\r\n    modal.classList.remove(\"show\");\r\n    setTimeout(() => {\r\n      modal.style.display = \"none\";\r\n    }, 300);\r\n  }\r\n\r\n  if (closeButton && modal) {\r\n    closeButton.addEventListener(\"click\", closeModal);\r\n  }\r\n\r\n  if (modal) {\r\n    window.addEventListener(\"click\", function (event) {\r\n      if (event.target === modal) {\r\n        closeModal();\r\n      }\r\n    });\r\n  }\r\n\r\n});"],"names":["document","addEventListener","inputs","querySelectorAll","modal","getElementById","closeButton","querySelector","contactForm","toggleLabel","input","value","trim","classList","add","remove","closeModal","setTimeout","style","display","forEach","window","async","e","preventDefault","form","target","submitButton","disabled","formData","FormData","controller","AbortController","timeoutId","abort","response","fetch","action","method","body","signal","clearTimeout","ok","Error","status","result","text","toLowerCase","includes","reset","error","console","alert","event"],"sourceRoot":""}